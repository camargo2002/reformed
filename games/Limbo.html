<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Limbo</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #0f1436;
      color: #ffffff;
    }

.stake-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #080c27;
  padding: 15px 50px;
  box-shadow: 0 0 10px #00000050;
  z-index: 10;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 50px;
}

.stake-header .left .logo {
  font-size: 32px;
  font-weight: bold;
  color: white;
  cursor: pointer;
}

.stake-header .center {
  display: flex;
  align-items: center;
  gap: 15px;
}

.balance {
  background-color: #2a325f;
  padding: 12px 12px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  gap: 6px;
  color: #fff;
  font-size: 14px;
}

.deposit-input {
  width: 80px;
  padding: 12px;
  border-radius: 6px;
  border: none;
  background-color: #2a325f;
  color: white;
}

.deposit-btn {
  background-color: #4558ff;
  border: none;
  padding: 12px 16px;
  border-radius: 6px;
  color: white;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s;
}

.deposit-btn:hover {
  background-color: #1a5ed9;
}

.stake-header .right {
  display: flex;
  gap: 20px;
}

.icon {
  cursor: pointer;
  filter: brightness(1.2);
}

body {
  padding-top: 70px;
}


    .container {
      display: flex;
      height: calc(100vh - 60px);
      width: 100vw;
    }

    .sidebar {
      width: 300px;
      background-color: #0a1031;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    label {
      font-size: 0.9rem;
      margin-bottom: 5px;
      display: block;
      color: #cbd5e1;
    }

    input[type="number"],
    input[type="text"] {
      width: 100%;
      padding: 8px;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      background-color: #334155;
      color: #ffffff;
    }

    input:disabled {
      opacity: 0.6;
    }

    .multiplier-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }

    .multiplier-buttons button {
      flex: 1;
      padding: 6px;
      background-color: #334155;
      color: #ffffff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.2s;
    }

    .multiplier-buttons button:hover {
      background-color: #475569;
    }

    #playBtn,
    .auto-play {
      padding: 12px;
      background-color: #22c55e;
      border: none;
      border-radius: 8px;
      color: #0f172a;
      font-weight: bold;
      cursor: pointer;
      transition: 0.2s;
      margin-top: 10px;
    }

    #playBtn:hover,
    .auto-play:hover {
      background-color: #16a34a;
    }

    .balance {
      margin-top: auto;
      font-weight: bold;
      font-size: 1rem;
    }

    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: calc(100vh - 60px);
      padding-bottom: 60px;
    }

    #multiplierResult {
      font-size: 5rem;
      font-weight: bold;
      color: #22c55e;
      transition: color 0.3s ease;
      text-shadow: 0 0 15px rgba(34, 197, 94, 0.3);
    }

    .input-row {
      display: flex;
      gap: 20px;
      margin-top: 30px;
      align-items: flex-end;
    }

    .input-row div {
      display: flex;
      flex-direction: column;
      align-items: start;
    }

    #fastModeBtn {
      padding: 8px 16px;
      background-color: #334155;
      border: none;
      border-radius: 6px;
      color: #cbd5e1;
      cursor: pointer;
      font-weight: bold;
      font-size: 0.9rem;
      transition: background-color 0.2s ease, color 0.2s ease;
    }

    #fastModeBtn:hover {
      background-color: #475569;
    }

    #fastModeBtn.active {
      background-color: #22c55e;
      color: #0f172a;
    }

    .recent-results {
      position: fixed;
      top: 60px;
      right: 20px;
      display: flex;
      gap: 6px;
      z-index: 1000;
    }

    .recent-results .result-bubble {
      padding: 6px 10px;
      border-radius: 999px;
      font-weight: bold;
      font-size: 0.9rem;
      color: white;
      background-color: #334155;
      transition: all 0.3s ease;
    }

    .recent-results .win {
      background-color: #22c55e;
      color: #0f172a;
    }

    .recent-results .lose {
      background-color: #1e293b;
      color: #cbd5e1;
    }

    .tabs {
      display: flex;
      gap: 5px;
      margin-bottom: 10px;
    }

    .tab {
      flex: 1;
      padding: 8px;
      background-color: #334155;
      border: none;
      border-radius: 6px;
      color: #cbd5e1;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s ease;
    }

    .tab.active {
      background-color: #22c55e;
      color: #0f172a;
    }

    .tab:hover {
      background-color: #475569;
    }

    .tab-panel {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .hidden {
      display: none;
    }

    .row {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .row input {
      width: 70px;
    }

    .reset-btn {
      background-color: #f3f4f6;
      border: none;
      color: #0f172a;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.2s;
    }

    .reset-btn:hover {
      background-color: #e5e7eb;
    }

    .toggle-mode-btn {
      padding: 6px 10px;
      border-radius: 6px;
      border: none;
      font-weight: bold;
      cursor: pointer;
      background-color: #1e293b;
      color: #cbd5e1;
      transition: background-color 0.2s ease;
    }

    .toggle-mode-btn.active {
      background-color: #22c55e;
      color: #ffffff;
    }

    .balance-icon {
      width: 18px;
      height: 18px;
    }
  </style>
</head>
<body>
  <!-- HEADER/NAVBAR -->
<header class="stake-header">
  <div class="left">
    <span class="logo" onclick="window.location.href='../index.html'">REFORMED</span>
  </div>
  <div class="center">
    <div class="balance">
      <span id="navbarBalance">R$ 0.00</span>
      <img src="https://img.icons8.com/ios-glyphs/20/ffffff/diamond.png" alt="Saldo">
    </div>
    <input id="credits" class="deposit-input" type="number" value="500" min="1" step="1">
    <button class="deposit-btn" id="depositBtn">Depositar</button>
  </div>
  <div class="right">
    <img src="https://img.icons8.com/ios-glyphs/24/ffffff/user--v1.png" alt="Perfil" class="icon" />
  </div>
</header>


  <!-- RECENT RESULTS -->
  <div class="recent-results" id="recentResults"></div>

  <!-- CONTAINER JOGO LIMBO -->
  <div class="container">
    <div class="sidebar">
      <div class="tabs">
        <button id="manualTab" class="tab active">Manual</button>
        <button id="autoTab" class="tab">Automático</button>
      </div>

      <!-- PAINEL MANUAL -->
      <div class="tab-panel" id="manualPanel">
        <label>Valor da Aposta</label>
        <input type="number" id="betAmount" value="0.00000000" min="0" step="0.00000001" />
        <div class="multiplier-buttons">
          <button onclick="adjustBet(0.5)">½</button>
          <button onclick="adjustBet(2)">2×</button>
        </div>
        <label>Lucro na Vitória</label>
        <input type="text" id="profitDisplay" disabled />
        <button id="playBtn">Aposta</button>
        <div class="balance">Saldo: <span id="balanceDisplay">0.00</span> USD</div>
      </div>

      <!-- PAINEL AUTOMÁTICO -->
      <div class="tab-panel hidden" id="autoPanel">
        <label>Valor da Aposta</label>
        <input type="number" id="autoBetAmount" value="0.00000000" min="0" step="0.00000001" />
        <label>Número de Apostas</label>
        <input type="number" id="autoNumBets" value="0" min="1" />
        <label>Na Vitória</label>
        <div class="row">
          <button class="toggle-mode-btn active" id="onWinReset">Resetar</button>
          <button class="toggle-mode-btn" id="onWinIncreaseBtn">Aumentar por</button>
          <input type="number" id="onWinPercent" value="0" step="0.1" /><span>%</span>
        </div>
        <label>Na Derrota</label>
        <div class="row">
          <button class="toggle-mode-btn active" id="onLossReset">Resetar</button>
          <button class="toggle-mode-btn" id="onLossIncreaseBtn">Aumentar por</button>
          <input type="number" id="onLossPercent" value="0" step="0.1" /><span>%</span>
        </div>
        <label>Parar no Lucro</label>
        <input type="number" id="stopProfit" value="0.00000000" min="0" />
        <label>Parar na Derrota</label>
        <input type="number" id="stopLoss" value="0.00000000" min="0" />
        <button class="auto-play" id="startAutoBet">Começar Apostas Automáticas</button>
      </div>
    </div>

    <!-- JOGO PRINCIPAL -->
    <div class="main">
      <div id="multiplierResult">1.00×</div>
      <div class="input-row">
        <div>
          <label>Multiplicador Alvo</label>
          <input type="number" id="targetMultiplier" value="2" min="1.05" step="0.01" />
        </div>
        <div>
          <label>Chance de Vitória</label>
          <input type="text" id="chanceDisplay" disabled />
        </div>
        <!-- Botão Modo Rápido -->
        <button id="fastModeBtn" class="toggle-mode-btn">Modo Rápido</button>
      </div>
    </div>
  </div>

  <script>
    // LIMBO SCRIPT COMPLETO
    let balance = parseFloat(localStorage.getItem("sharedBalance")) || 1000.0;
    const houseEdge = 0.01;

    // MODO RÁPIDO: toggle e estado
    let fastMode = false;
    const fastModeBtn = document.getElementById("fastModeBtn");
    if (fastModeBtn) {
      fastModeBtn.addEventListener("click", () => {
        fastMode = !fastMode;
        fastModeBtn.classList.toggle("active");
      });
    }

    const betInput = document.getElementById("betAmount");
    const profitDisplay = document.getElementById("profitDisplay");
    const targetMultiplierInput = document.getElementById("targetMultiplier");
    const chanceDisplay = document.getElementById("chanceDisplay");
    const balanceDisplay = document.getElementById("balanceDisplay");
    const navbarBalance = document.getElementById("navbarBalance");
    const multiplierResult = document.getElementById("multiplierResult");
    const playBtn = document.getElementById("playBtn");
    const creditsInput = document.getElementById("credits");
    const depositBtn = document.querySelector(".deposit-btn");
    const manualTab = document.getElementById("manualTab");
    const autoTab = document.getElementById("autoTab");
    const manualPanel = document.getElementById("manualPanel");
    const autoPanel = document.getElementById("autoPanel");

    const startAutoBetBtn = document.getElementById("startAutoBet") || document.querySelector(".auto-play");
    const autoBetAmount = document.getElementById("autoBetAmount");
    const autoNumBets = document.getElementById("autoNumBets");
    const stopProfit = document.getElementById("stopProfit");
    const stopLoss = document.getElementById("stopLoss");

    const onWinReset = document.getElementById("onWinReset");
    const onWinIncreaseBtn = document.getElementById("onWinIncreaseBtn");
    const onWinPercent = document.getElementById("onWinPercent");
    const onLossReset = document.getElementById("onLossReset");
    const onLossIncreaseBtn = document.getElementById("onLossIncreaseBtn");
    const onLossPercent = document.getElementById("onLossPercent");

    let onWinMode = "reset";
    let onLossMode = "reset";
    let autoRunning = false;
    let autoTimeout = null;

    // Alterna abas Manual/Auto
    manualTab.addEventListener("click", () => {
      manualTab.classList.add("active");
      autoTab.classList.remove("active");
      manualPanel.classList.remove("hidden");
      autoPanel.classList.add("hidden");
    });
    autoTab.addEventListener("click", () => {
      autoTab.classList.add("active");
      manualTab.classList.remove("active");
      autoPanel.classList.remove("hidden");
      manualPanel.classList.add("hidden");
    });

    // Atualiza saldos exibidos
    function updateBalanceDisplay() {
      balanceDisplay.textContent = balance.toFixed(2);
      navbarBalance.textContent = "R$ " + balance.toFixed(2);
      localStorage.setItem("sharedBalance", balance.toFixed(2));
    }

    // Ajuste rápido de aposta
    function adjustBet(multiplier) {
      let value = parseFloat(betInput.value);
      if (!isNaN(value)) {
        betInput.value = (value * multiplier).toFixed(8);
        updateProfitDisplay();
      }
    }

    // Lucro manual
    function updateProfitDisplay() {
      const bet = parseFloat(betInput.value);
      const mult = parseFloat(targetMultiplierInput.value);
      if (!isNaN(bet) && !isNaN(mult)) {
        profitDisplay.value = (bet * mult - bet).toFixed(8);
      } else {
        profitDisplay.value = "--";
      }
    }

    // Chance manual
    function updateChanceDisplay() {
      const target = parseFloat(targetMultiplierInput.value);
      if (!isNaN(target) && target >= 1.05) {
        chanceDisplay.value = (((1 / target) * (1 - houseEdge)) * 100).toFixed(2) + "%";
      } else {
        chanceDisplay.value = "--";
      }
    }

    // Animação do multiplicador
    function animateMultiplier(finalValue, callback) {
      // Skip animation em modo rápido
      if (fastMode) {
        multiplierResult.textContent = finalValue.toFixed(2) + "×";
        if (typeof callback === "function") callback();
        return;
      }

      const duration = 1500;
      const start = performance.now();
      function frame(now) {
        const t = Math.min((now - start) / duration, 1);
        const eased = 1 - Math.pow(1 - t, 3);
        const val = 1 + (finalValue - 1) * eased;
        multiplierResult.textContent = val.toFixed(2) + "×";
        if (t < 1) requestAnimationFrame(frame);
        else if (callback) callback();
      }
      requestAnimationFrame(frame);
    }

    // Bolha de resultado
    function addResultBubble(mult, won) {
      const cont = document.getElementById("recentResults");
      const b = document.createElement("div");
      b.classList.add("result-bubble", won ? "win" : "lose");
      b.textContent = mult.toFixed(2) + "×";
      cont.appendChild(b);
      if (cont.children.length > 8) cont.removeChild(cont.children[0]);
    }

    // Modos Win/Loss
    onWinReset.addEventListener("click", () => {
      onWinMode = "reset";
      onWinReset.classList.add("active");
      onWinIncreaseBtn.classList.remove("active");
    });
    onWinIncreaseBtn.addEventListener("click", () => {
      onWinMode = "increase";
      onWinReset.classList.remove("active");
      onWinIncreaseBtn.classList.add("active");
    });
    onLossReset.addEventListener("click", () => {
      onLossMode = "reset";
      onLossReset.classList.add("active");
      onLossIncreaseBtn.classList.remove("active");
    });
    onLossIncreaseBtn.addEventListener("click", () => {
      onLossMode = "increase";
      onLossReset.classList.remove("active");
      onLossIncreaseBtn.classList.add("active");
    });
    
    // Eventos inputs
    betInput.addEventListener("input", updateProfitDisplay);
    targetMultiplierInput.addEventListener("input", () => {
      if (parseFloat(targetMultiplierInput.value) < 1.05) targetMultiplierInput.value = "1.05";
      updateProfitDisplay();
      updateChanceDisplay();
    });
    targetMultiplierInput.addEventListener("change", () => {
      updateProfitDisplay();
      updateChanceDisplay();
    });

    // Aposta manual
    playBtn.addEventListener("click", () => {
      const bet = parseFloat(betInput.value);
      const target = parseFloat(targetMultiplierInput.value);
      if (isNaN(bet) || bet <= 0) return alert("Insira um valor válido.");
      if (bet > balance) return alert("Saldo insuficiente.");
      if (isNaN(target) || target < 1.05) return alert("Multiplicador inválido. Mínimo: 1.05");

      multiplierResult.style.color = "#ffffff";
      const maxRoll = 1 / (target / (1 - houseEdge));
      const roll = Math.random();
      const multiplier = 1 / roll;

      animateMultiplier(multiplier, () => {
        const win = roll < maxRoll;
        let nextBet = bet;
        if (win) {
          balance += bet * target - bet;
          multiplierResult.style.color = "#22c55e";
          if (onWinMode === "increase") nextBet = bet * (1 + parseFloat(onWinPercent.value) / 100);
        } else {
          balance -= bet;
          multiplierResult.style.color = "#ef4444";
          if (onLossMode === "increase") nextBet = bet * (1 + parseFloat(onLossPercent.value) / 100);
        }
        betInput.value = bet.toFixed(8);
        updateProfitDisplay();
        addResultBubble(multiplier, win);
        updateBalanceDisplay();
      });
    });

    // Depositar
depositBtn.addEventListener("click", () => {
  const v = parseFloat(creditsInput.value);
  if (!isNaN(v) && v > 0) {
    balance += v;
    updateBalanceDisplay();
  }
});


    // Aposta automática
    if (startAutoBetBtn) {
      startAutoBetBtn.addEventListener("click", () => {
        if (autoRunning) {
          clearTimeout(autoTimeout);
          autoRunning = false;
          startAutoBetBtn.textContent = "Começar Apostas Automáticas";
          return;
        }
        let currentBet = parseFloat(autoBetAmount.value);
        const baseBet = currentBet;
        let betsLeft = parseInt(autoNumBets.value);
        let totalProfit = 0;
        autoRunning = true;
        startAutoBetBtn.textContent = "Parar Apostas Automáticas";

        function runAutoBet() {
          if (!autoRunning || betsLeft <= 0) {
            autoRunning = false;
            startAutoBetBtn.textContent = "Começar Apostas Automáticas";
            return;
          }
          const target = parseFloat(targetMultiplierInput.value);
          multiplierResult.style.color = "#ffffff";
          const maxRoll = 1 / (target / (1 - houseEdge));
          const roll = Math.random();
          const multiplier = 1 / roll;

          animateMultiplier(multiplier, () => {
            const win = roll < maxRoll;
            if (win) {
              totalProfit += currentBet * target - currentBet;
              balance += currentBet * target - currentBet;
              if (onWinMode === "increase") currentBet *= 1 + parseFloat(onWinPercent.value) / 100;
              else currentBet = baseBet;
              multiplierResult.style.color = "#22c55e";
            } else {
              totalProfit -= currentBet;
              balance -= currentBet;
              if (onLossMode === "increase") currentBet *= 1 + parseFloat(onLossPercent.value) / 100;
              else currentBet = baseBet;
              multiplierResult.style.color = "#ef4444";
            }

            betsLeft--;
            autoNumBets.value = betsLeft;
            autoBetAmount.value = currentBet.toFixed(8);
            updateBalanceDisplay();
            addResultBubble(multiplier, win);

            const lucroMax = parseFloat(stopProfit.value) > 0 ? parseFloat(stopProfit.value) : Infinity;
            const prejuMax = parseFloat(stopLoss.value) > 0 ? parseFloat(stopLoss.value) : Infinity;
            if (totalProfit >= lucroMax || totalProfit <= -prejuMax) {
              alert("Aposta automática encerrada por limite de lucro/prejuízo.");
              autoRunning = false;
              startAutoBetBtn.textContent = "Começar Apostas Automáticas";
              return;
            }

            if (betsLeft > 0 && balance >= currentBet) {
              autoTimeout = setTimeout(runAutoBet, 600);
            } else {
              alert("Aposta automática finalizada.");
              autoRunning = false;
              startAutoBetBtn.textContent = "Começar Apostas Automáticas";
            }
          });
        }
        runAutoBet();
      });
    }

    // Inicialização
    updateBalanceDisplay();
    updateProfitDisplay();
    updateChanceDisplay();
  </script>
</body>
</html>
